/**
 * Accessibilité WCAG 2.1 Niveau AA - SGDI
 * Conformité Web Content Accessibility Guidelines
 */

/* ============================================================================
   1. CONTRASTE DES COULEURS (WCAG 2.1 - 1.4.3)
   Ratio minimum: 4.5:1 pour texte normal, 3:1 pour grand texte
   ============================================================================ */

/* Assurer contraste minimum */
body {
    color: #212529; /* Contraste 16.5:1 sur blanc */
}

.text-muted {
    color: #6c757d !important; /* Contraste 4.54:1 sur blanc */
}

/* Liens avec contraste suffisant */
a {
    color: #0056b3; /* Contraste 7.5:1 sur blanc */
    text-decoration: underline; /* Visible sans dépendre de la couleur */
}

a:hover,
a:focus {
    color: #003d82; /* Contraste encore meilleur */
    text-decoration: underline;
}

/* Boutons avec contraste optimal */
.btn-primary {
    background-color: #0056b3; /* Contraste texte blanc: 8.6:1 */
    border-color: #0056b3;
}

.btn-secondary {
    background-color: #495057; /* Contraste texte blanc: 10.4:1 */
    border-color: #495057;
}

/* ============================================================================
   2. FOCUS VISIBLE (WCAG 2.1 - 2.4.7)
   Indicateur de focus clairement visible
   ============================================================================ */

/* Focus universel bien visible */
*:focus {
    outline: 3px solid #0056b3;
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.25);
}

/* Focus pour liens */
a:focus {
    outline: 3px solid #0056b3;
    outline-offset: 2px;
}

/* Focus pour boutons */
.btn:focus,
button:focus {
    outline: 3px solid #0056b3;
    outline-offset: 2px;
    box-shadow: 0 0 0 0.25rem rgba(0, 86, 179, 0.5);
}

/* Focus pour champs de formulaire */
.form-control:focus,
.form-select:focus,
.form-check-input:focus {
    border-color: #0056b3;
    outline: 3px solid #0056b3;
    outline-offset: 0;
    box-shadow: 0 0 0 0.25rem rgba(0, 86, 179, 0.25);
}

/* Désactiver outline uniquement pour souris (skip-link exception) */
.mouse-user *:focus:not(.skip-link) {
    outline: none;
}

.mouse-user .btn:focus,
.mouse-user button:focus {
    box-shadow: 0 0 0 0.25rem rgba(0, 86, 179, 0.5);
}

/* ============================================================================
   3. NAVIGATION AU CLAVIER (WCAG 2.1 - 2.1.1, 2.1.2)
   ============================================================================ */

/* Skip Links (Aller au contenu) */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: #0056b3;
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 10000;
    border-radius: 0 0 4px 0;
}

.skip-link:focus {
    top: 0;
    outline: 3px solid #ffc107;
}

/* Éléments interactifs facilement accessibles */
button,
a,
input,
select,
textarea {
    cursor: pointer;
}

button:disabled,
input:disabled,
select:disabled,
textarea:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}

/* ============================================================================
   4. TAILLE DU TEXTE (WCAG 2.1 - 1.4.4)
   Le texte doit pouvoir être redimensionné à 200%
   ============================================================================ */

/* Utiliser rem au lieu de px */
html {
    font-size: 100%; /* 16px par défaut */
}

body {
    font-size: 1rem; /* 16px */
    line-height: 1.5; /* Minimum 1.5 pour lisibilité */
}

h1 {
    font-size: 2.5rem; /* 40px */
    line-height: 1.2;
}

h2 {
    font-size: 2rem; /* 32px */
    line-height: 1.3;
}

h3 {
    font-size: 1.75rem; /* 28px */
    line-height: 1.3;
}

h4 {
    font-size: 1.5rem; /* 24px */
    line-height: 1.4;
}

h5 {
    font-size: 1.25rem; /* 20px */
    line-height: 1.4;
}

h6 {
    font-size: 1rem; /* 16px */
    line-height: 1.5;
}

small,
.small {
    font-size: 0.875rem; /* 14px - Minimum lisible */
}

/* Texte minimum jamais en dessous de 12px */
.text-xs {
    font-size: 0.75rem; /* 12px - Absolu minimum */
}

/* ============================================================================
   5. ESPACEMENT DU TEXTE (WCAG 2.1 - 1.4.12)
   ============================================================================ */

/* Espacement minimum pour lisibilité */
p {
    line-height: 1.5; /* Au moins 1.5x la taille de police */
    margin-bottom: 1em;
}

/* Espacement des paragraphes */
p + p {
    margin-top: 1em;
}

/* Espacement des listes */
ul,
ol {
    padding-left: 2em;
    line-height: 1.5;
}

li {
    margin-bottom: 0.5em;
}

/* ============================================================================
   6. CIBLES TACTILES (WCAG 2.1 - 2.5.5)
   Taille minimum: 44x44 pixels
   ============================================================================ */

/* Boutons et liens suffisamment grands */
.btn {
    min-height: 44px;
    min-width: 44px;
    padding: 0.5rem 1rem;
}

.btn-sm {
    min-height: 36px;
    min-width: 36px;
    padding: 0.375rem 0.75rem;
}

.btn-lg {
    min-height: 48px;
    min-width: 48px;
    padding: 0.75rem 1.5rem;
}

/* Liens dans le texte */
a {
    min-height: 24px;
    display: inline-block;
    padding: 0.125rem 0;
}

/* Éléments de formulaire */
.form-control,
.form-select {
    min-height: 44px;
    padding: 0.5rem 0.75rem;
}

/* Checkboxes et radios */
.form-check-input {
    width: 1.5em;
    height: 1.5em; /* 24px minimum */
    margin-top: 0.125em;
}

/* Icons cliquables */
.clickable-icon {
    min-width: 44px;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* ============================================================================
   7. MESSAGES D'ERREUR (WCAG 2.1 - 3.3.1, 3.3.3)
   ============================================================================ */

/* Erreurs de formulaire visibles */
.invalid-feedback,
.error-message {
    display: block;
    color: #dc3545; /* Contraste suffisant */
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

.form-control.is-invalid,
.form-select.is-invalid {
    border-color: #dc3545;
    border-width: 2px; /* Plus visible */
    padding-right: calc(1.5em + 0.75rem);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

/* Messages de succès */
.valid-feedback,
.success-message {
    display: block;
    color: #198754; /* Contraste suffisant */
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

/* ============================================================================
   8. COHÉRENCE ET ORIENTATION (WCAG 2.1 - 1.3.4, 1.3.5)
   ============================================================================ */

/* Breadcrumbs pour navigation */
.breadcrumb {
    padding: 0.75rem 1rem;
    margin-bottom: 1rem;
    list-style: none;
    background-color: #e9ecef;
    border-radius: 0.25rem;
}

/* Indicateurs visuels de page active */
.active {
    font-weight: bold;
}

/* ============================================================================
   9. MODE HAUTE LISIBILITÉ
   ============================================================================ */

/* Mode haute lisibilité (option) */
.high-contrast-mode {
    background: #000;
    color: #fff;
}

.high-contrast-mode a {
    color: #ffff00;
    text-decoration: underline;
}

.high-contrast-mode .btn-primary {
    background: #0000ff;
    color: #ffff00;
    border: 2px solid #ffff00;
}

/* ============================================================================
   10. ANIMATIONS RESPECTUEUSES (WCAG 2.1 - 2.3.3)
   ============================================================================ */

/* Respecter préférence "reduced motion" */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    .fade,
    .collapse,
    .modal {
        transition: none;
    }
}

/* ============================================================================
   11. ATTRIBUTS ARIA HELPERS
   ============================================================================ */

/* Éléments masqués mais lisibles par lecteurs d'écran */
.sr-only,
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Visually hidden mais peut recevoir focus */
.sr-only-focusable:focus,
.visually-hidden-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* ============================================================================
   12. TABLEAUX ACCESSIBLES
   ============================================================================ */

/* En-têtes de tableau bien définis */
table caption {
    padding: 0.75rem;
    caption-side: top;
    font-weight: bold;
    text-align: left;
}

th {
    font-weight: bold;
    text-align: left;
}

/* Cellules bien espacées */
td,
th {
    padding: 0.75rem;
}

/* ============================================================================
   13. FORMULAIRES ACCESSIBLES
   ============================================================================ */

/* Labels toujours visibles */
label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-label {
    margin-bottom: 0.5rem;
}

/* Astérisque pour champs requis */
.required::after {
    content: " *";
    color: #dc3545;
    font-weight: bold;
}

/* Instructions de formulaire */
.form-text {
    margin-top: 0.25rem;
    font-size: 0.875rem;
    color: #6c757d;
}

/* ============================================================================
   14. IMAGES ACCESSIBLES
   ============================================================================ */

/* Toutes les images doivent avoir un alt */
img:not([alt]) {
    border: 3px solid #dc3545; /* Alerte visuelle en développement */
}

/* Images décoratives */
img[alt=""],
img[role="presentation"] {
    border: none;
}

/* ============================================================================
   15. RESPONSIVE ET ZOOM
   ============================================================================ */

/* Support zoom jusqu'à 200% */
@media (min-width: 1px) {
    html {
        font-size: 100%;
    }
}

/* Pas de scroll horizontal à 200% de zoom */
body {
    overflow-x: hidden;
}

.container,
.container-fluid {
    max-width: 100%;
}

/* ============================================================================
   16. MODE IMPRESSION ACCESSIBLE
   ============================================================================ */

@media print {
    /* Liens avec URL visible */
    a[href]:after {
        content: " (" attr(href) ")";
    }

    /* Contraste optimal */
    * {
        color: #000 !important;
        background: #fff !important;
    }

    /* Bordures visibles */
    table,
    th,
    td {
        border: 1px solid #000 !important;
    }
}
